it('should finalize scanner input on Enter key press', () => {
  const event: KeyPressInputEvent = {
    key: 'Enter',
    timestamp: 150,
    shiftKey: false
  };
  
  // Set the input buffer to simulate a scanned input
  service['inputBuffer'] = 'AB123';
  
  // Simulate last keypress to ensure time difference is within threshold
  service['lastTimestamp'] = 140; // less than 30ms threshold
  
  // Spy on the subject's next() method
  const nextSpy = jest.spyOn(service['scannerInputEventObservable'], 'next');
  
  // Call the handler for the Enter key press
  service['handleEnterKeyPress'](event);

  // Ensure next was called with the correct input data
  expect(nextSpy).toHaveBeenCalledWith({
    scannerInput: 'AB123',
    isTag: false
  });
});